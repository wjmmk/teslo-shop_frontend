
<h1 class="text-3xl font-bold font-montserrat py-2">Todos los Productos</h1>
@if (gender() === 'kid') {
  <div class="flex justify-between">
    <h5 class="text-sm md:text-xl mt-1">Para todos los gustos
      <span class="text-amber-200">{{gender()}}.</span>
    </h5>
    <search-bar (search)="filtrarProductos($event)"></search-bar>
  </div>
} @else if (gender() === 'women'){
  <div class="flex justify-between">
    <h5 class="text-sm md:text-xl mt-1">Para todos los gustos
      <span class="text-amber-200">{{gender()}}.</span>
    </h5>
    <search-bar (search)="filtrarProductos($event)"></search-bar>
  </div>
} @else {
  <div class="flex justify-between">
    <h5 class="text-sm md:text-xl mt-1">Para todos los gustos
      <span class="text-amber-200">{{gender()}}.</span>
    </h5>
    <search-bar (search)="filtrarProductos($event)"></search-bar>
  </div>
}

@defer (when isLoading()) {
<section class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 mt-2 gap-3">
  @if (isLoading()) {
    @for (skeleton of [1, 2, 3, 4, 5, 6, 7, 8, 9]; track skeleton) {
      <product-card-skeleton />
    }
  } @else if (!hasError() ) {
    @for (product of productsResource.value()?.products; track $index) {
      <product-card [product]="product" />
    }
  } @else {
    <div class="col-span-full text-center text-white mt-6 text-lg">
      <strong>La App se está despertando...</strong><br />
      Por favor espere unos segundos o recargue la página si el problema persiste.
    </div>
  }
</section>
}

<section>
  @if (!isLoading() && !hasError()) {
    <shared-pagination
      [pages]="productsResource.value()?.pages ?? 0"
      [currentPage]="paginationService.currentPage()" />
  }
</section>
