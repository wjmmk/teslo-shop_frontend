<div
  class="fixed top-0 right-0 h-full w-80 bg-gray-900 text-white shadow-2xl transform transition-transform duration-500 ease-in-out z-50"
  [class.translate-x-full]="!isOpen"
>
  <!-- Encabezado -->
  <div class="flex justify-between items-center px-4 py-3 border-b border-gray-700">
    <h2 class="text-lg font-bold tracking-wide">ðŸ›’ Mi SelecciÃ³n</h2>
    <button class="text-gray-400 hover:text-red-400 transition" (click)="closeCart()">âœ–</button>
  </div>

  <!-- Lista de productos -->
  <div class="p-4 space-y-4 overflow-y-auto h-[70%]">
    @if (products().length === 0) {
    <div class="text-gray-400 text-center">
      No has agregado productos todavÃ­a
    </div>
    }
    @for (product of products(); track product.id) {
    <div class="flex items-center bg-gray-800 rounded-lg p-2 shadow-md">
      <img [src]="product.images[0] | productImage" alt="producto" class="w-16 h-16 object-cover rounded-lg" />
      <div class="ml-3 flex-1">
        <h3 class="font-semibold text-sm">{{ product.title }}</h3>
        <p class="text-gray-400 text-xs">Cantidad: {{ product.stock }}</p>
        <p class="text-yellow-400 font-bold text-sm">
          ${{ product.price * product.stock | number }}
        </p>
      </div>
      <button class="ml-2 text-red-500 hover:text-red-300" (click)="removeProduct(product)">
        ðŸ—‘
      </button>
    </div>
    }
  </div>


  <!-- Footer resumen -->
  <div class="p-4 border-t border-gray-700">
    <div class="flex justify-between items-center mb-3">
      <span class="text-gray-300 font-medium">Total:</span>
      <span class="text-xl font-bold text-green-400">${{ productsCartService.total | number }}</span>
    </div>
    <button class="w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:opacity-90 text-white py-2 rounded-xl font-semibold shadow-lg
                   transition transform hover:-translate-y-1" (click)="checkout()"
    >
      Finalizar Compra
    </button>
  </div>
</div>
